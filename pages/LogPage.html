<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 p-6">
    <div class="container mx-auto">
        <h1 class="text-3xl font-bold mb-4">Log Data</h1>
        <div id="log-container" class="bg-white shadow-md rounded-lg p-4">
            <!-- Log entries will be inserted here -->
        </div>
    </div>

    <script>
        async function fetchLogData() {
            try {
                const response = await fetch('/api/log');
                const data = await response.json();
                console.log('Log data:', data);
                const logContainer = document.getElementById('log-container');

                data.forEach(log => {
                    const logEntry = document.createElement('div');
                    logEntry.className = 'border-b border-gray-200 py-2 flex items-center justify-between';
                    if (log.type === 'error') {
                        logEntry.classList.add('text-red-500');
                    } else if (log.type === 'notification') {
                        logEntry.classList.add('text-green-500');
                    } else {
                        logEntry.classList.add('text-gray-800');
                    }
                    logEntry.innerHTML = `
                        <p class="text-lg">${log.message}</p>
                        <p class="text-sm text-gray-600">${new Date(log.timestamp).toLocaleString('en-GB', { hour: '2-digit', minute: '2-digit', hour12: true, day: '2-digit', month: '2-digit', year: 'numeric' })}</p>
                    `;
                    logContainer.prepend(logEntry);
                });
            } catch (error) {
                console.error('Error fetching log data:', error);
            }
        }

        fetchLogData();
    </script>
</body>
</html>